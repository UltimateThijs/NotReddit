<!-- eslint-disable @angular-eslint/template/eqeqeq -->
<div class="component edit">
    <div class="row"></div>
  
    <div *ngIf="userExists">
      <h1>{{ staticUser?.username }}</h1>
    </div>
    <div *ngIf="!userExists">
      <h1>Add user</h1>
    </div>
  
    <div class="row">
      <div class="d-flex justify-content-center">
        <div class="col-6">
          <div class="container">
            <form #userEditForm="ngForm" name="form" (ngSubmit)="onSubmit()">
              <div class="form-group">
                <label for="username">Username</label>
                <input
                  type="text"
                  class="form-control"
                  placeholder="Your username"
                  [(ngModel)]="user!.username"
                  name="username"
                  required
                  #username="ngModel"
                  minlength="3"
                />
              </div>
              <label for="emailAdress" class="form-label">Emailaddress</label>
              <input
                type="email"
                class="form-control"
                [(ngModel)]="user!.emailAddress"
                placeholder="Your email adress"
                name="emailAdress"
                #emailAdress="ngModel"
                required
                pattern="^[a-zA-Z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$"
              />
  
              <div class="row">
                <span
                  >Username must have atleast 3 characters:
                  <fa-icon
                    *ngIf="username.errors?.['minlength'] || (username.value == '')"
                    [icon]="faTimes"
                    class="redX"
                  >
                  </fa-icon>
                  <fa-icon
                    *ngIf="!(username.errors?.['minlength']) && !(username.value == '')"
                    [icon]="faCheck"
                    class="greenCheck"
                  >
                  </fa-icon>
                </span>
              </div>
              <div class="row">
                <div class="col">
                  <button
                    role="button"
                    type="submit"
                    class="btn btn-primary mx-2"
                    [disabled]="!userEditForm.valid"
                  >
                    Submit
                  </button>
                </div>
                <div class="col">
                  <button
                    class="btn btn-outline-secondary float-right"
                    href="#"
                    role="button"
                    routerLink="/user"
                  >
                    Cancel
                  </button>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>